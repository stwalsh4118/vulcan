# [9-1] LogLine Model & Store Interface Extension

[Back to task list](./tasks.md)

## Description

Define the `LogLine` data type in the model package and extend the `Store` interface with two new methods: `InsertLogLine` for persisting individual log lines and `GetLogLines` for retrieving all log lines for a workload ordered by sequence number. This task establishes the contract that subsequent tasks (9-2, 9-3, 9-4) will implement and consume.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-19 07:13:41 | Created | N/A | Proposed | Task file created | AI_Agent |
| 2026-02-19 07:20:40 | Status Change | Proposed | InProgress | Started implementation | AI_Agent |
| 2026-02-19 07:23:00 | Status Change | InProgress | Review | Implementation complete, internal AI review passed | AI_Agent |
| 2026-02-19 07:57:42 | Status Change | Review | Done | Task completed and verified | AI_Agent |

## Requirements

1. Add a `LogLine` struct to `api/internal/model/` with fields: `ID` (int64), `WorkloadID` (string), `Seq` (int), `Line` (string), `CreatedAt` (time.Time).
2. Add JSON tags matching the snake_case convention used by the existing `Workload` model.
3. Extend the `Store` interface in `api/internal/store/store.go` with:
   - `InsertLogLine(ctx context.Context, workloadID string, seq int, line string) error`
   - `GetLogLines(ctx context.Context, workloadID string) ([]model.LogLine, error)`
4. Do NOT implement the methods on SQLiteStore yet (that is task 9-2).

## Implementation Plan

1. Add `LogLine` struct to `api/internal/model/workload.go` (or a new `logline.go` file — prefer the same file since it's small).
2. Add `InsertLogLine` and `GetLogLines` method signatures to the `Store` interface in `api/internal/store/store.go`.
3. Add stub implementations on `SQLiteStore` that return `nil` / empty slices so the project compiles.
4. Verify the project builds with `go build ./...`.

## Test Plan

- TypeScript/Go compilation passes without errors (`go build ./...`).
- The `Store` interface includes both new methods (verified by compilation).
- Stub methods exist on `SQLiteStore` so the interface is satisfied.

## Verification

- `go build ./...` passes.
- All existing tests pass (store, api, engine, model, e2e).
- Store interface includes both new methods (verified by compile-time check `var _ Store = (*SQLiteStore)(nil)`).
- Stub methods exist on SQLiteStore so the interface is satisfied.

## Files Modified

- `api/internal/model/workload.go` — Added `LogLine` struct.
- `api/internal/store/store.go` — Extended `Store` interface with `InsertLogLine` and `GetLogLines`.
- `api/internal/store/sqlite.go` — Added stub implementations for `InsertLogLine` and `GetLogLines`.
